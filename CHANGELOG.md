# 변경 이력 (Changelog)

이 파일은 AI ClassNote 프로젝트의 주요 변경사항을 기록합니다.

## [3.3.2] - 2025-10-16

### 변경됨 🔄
- **프롬프트 관리 방식 개선**: `prompt.txt`에서 `prompt.js`로 전환
  - JavaScript 변수로 프롬프트 관리 (`DEFAULT_PROMPT_TEMPLATE`)
  - fetch() API 의존성 제거로 CORS 문제 완전 해결
  - `file://` 프로토콜에서도 완벽하게 작동
  - 더 안전하고 확실한 프롬프트 로드 방식
- **프롬프트 초기화 UX 개선**: 편집기 초기화 시 편집 상태 유지
  - "초기값으로" 버튼 클릭 시 즉시 저장하지 않음
  - 사용자가 직접 저장/취소 결정 가능
  - 초기화 후 바로 수정 가능한 워크플로우

### 개선됨 🔧
- `loadPromptTemplate()` 함수를 동기 함수로 변경 (async 제거)
- 프롬프트 로드 우선순위 간소화 (2단계: 사용자 커스텀 → 기본)
- 코드 가독성 및 유지보수성 향상
- 파일 구조 정리: `prompt.js`를 `js/` 폴더로 이동하여 모듈 구조 일관성 확보

## [3.3.1] - 2025-10-16

### 개선됨 🔧
- **프롬프트 관리 최적화**: 코드 내 하드코딩된 긴 프롬프트를 제거하고 `prompt.txt` 파일 사용으로 완전히 전환
  - `api.js`의 `getDefaultPromptTemplate()` 함수를 최소 fallback으로 간소화
  - 프롬프트 로드 실패 시 명확한 경고 메시지와 최소 프롬프트 제공
  - 프롬프트 로드 우선순위와 관리 방법에 대한 JSDoc 주석 추가
- **UI 개선**: 설정 화면과 프롬프트 편집기에 `prompt.txt` 파일 사용에 대한 안내 추가
  - 프롬프트 편집 모달에 관리 방법 안내 박스 추가
  - 설정 화면에서 현재 사용 중인 프롬프트 소스(파일/커스텀) 명확하게 표시
- **문서화**: README의 "프롬프트 커스터마이징" 섹션 대폭 개선
  - 두 가지 프롬프트 관리 방법(파일 직접 수정 vs 앱 내 편집) 비교 설명
  - 프롬프트 로드 우선순위 명시
  - 각 방법의 장단점과 사용 시나리오 안내

### 변경됨 🔄
- 프롬프트 관리 철학: 코드 분리 원칙에 따라 프롬프트 내용을 외부 파일(`prompt.txt`)에서만 관리
- 코드 가독성 및 유지보수성 향상

## [3.3.0] - 2024-10-16

### 추가됨 ✨
- **프롬프트 커스터마이징**: `prompt.txt` 파일로 AI 분석 프롬프트를 자유롭게 수정 가능
  - 변수 시스템으로 학생 이름과 관찰 기록 자동 치환
  - 보고서 구조, 분석 관점, 문체를 원하는 대로 조정
  - 프롬프트 파일 로드 실패 시 기본 프롬프트 자동 사용
  - 성능 최적화를 위한 프롬프트 캐싱 기능
- **상세한 API 키 발급 가이드**: Google Gemini API 키 발급 방법을 단계별로 상세히 안내
- **API 연결 테스트 기능**: 헤더의 WiFi 아이콘으로 실시간 API 연결 상태 확인
- **학생 이름 인라인 편집**: 더블클릭 또는 F2 키로 즉시 수정
- **스마트 자동 선택**: 첫 번째 학생 추가 시 자동 선택
- **향상된 안내 메시지**: 각 화면에 상세한 사용법 안내
- **삭제된 학생 전용 안내**: 삭제된 학생 목록이 비어있을 때 상세 가이드

### 개선됨 🔧
- **API 오류 처리 강화**: 다양한 API 오류 상황에 대한 구체적인 안내 메시지
- **키보드 단축키 확장**: F2 키 추가로 더욱 효율적인 작업
- **사용자 경험 개선**: 호버 효과, 툴팁, 시각적 피드백 강화
- **오류 처리 강화**: 모든 주요 기능에 try-catch 블록 추가
- **코드 안정성**: 무한 재귀 호출 및 이벤트 리스너 중복 등록 문제 해결
- **README 문서화**: API 키 발급부터 문제 해결까지 포괄적인 가이드 제공

### 수정됨 🐛
- **API 테스트 기능**: 무한 재귀 호출로 인한 "알 수 없는 오류" 문제 해결
- **학생 삭제 기능**: 무한 재귀 호출 문제 해결
- **환경설정 모달**: 이벤트 리스너 중복 등록 방지
- **API 키 표시/숨김**: DOM 요소 접근 오류 수정
- **설정 저장**: 입력값 검증 및 오류 처리 개선

### 변경됨 🔄
- 프로젝트 이름을 "AI 교실 관찰 기록"에서 "AI ClassNote (AI 클래스노트)"로 변경
- 내보내기 파일명을 `ai-classnote-data-{날짜}.json` 형식으로 변경

## [3.2.0] - 이전 버전

### 추가됨
- 다중 학생 관찰 기능
- 과목별 AI 분석
- 데이터 내보내기/가져오기
- 학생 소프트 삭제 및 복원 기능

### 개선됨
- UI/UX 전면 개편
- 반응형 디자인 적용
- 키보드 단축키 지원

## [3.1.0] - 이전 버전

### 추가됨
- Google Gemini AI 통합
- 자동 저장 기능
- 로컬 스토리지 지원

## [3.0.0] - 초기 릴리스

### 추가됨
- 기본 학생 관리 기능
- 관찰 기록 작성 기능
- 간단한 요약 기능

---

**형식 안내**
- `추가됨`: 새로운 기능
- `개선됨`: 기존 기능의 개선
- `수정됨`: 버그 수정
- `변경됨`: 기존 기능의 변경
- `제거됨`: 제거된 기능
- `보안`: 보안 관련 수정

